<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daily Reports | MDX Capital Flow</title>
  <meta name="description" content="Daily BTC market analysis powered by MDX Capital Flow indicator. Charts, signals, and institutional-grade capital flow insights.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --orange: #ff6b00;
      --orange-light: #ff8533;
      --orange-glow: rgba(255, 107, 0, 0.3);
      --dark: #0a0a0a;
      --dark-card: #111111;
      --dark-border: #1a1a1a;
      --dark-hover: #161616;
      --gray: #888888;
      --gray-light: #aaaaaa;
      --gray-dark: #666666;
      --green: #00ff88;
      --green-dim: #00cc6a;
      --red: #ff4444;
      --red-dim: #cc3636;
      --yellow: #ffc800;
      --blue: #4a9eff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--dark);
      color: #fff;
      line-height: 1.6;
    }

    /* Navigation */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      padding: 1rem 2rem;
      background: rgba(10, 10, 10, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--dark-border);
    }

    .nav-content {
      max-width: 1000px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 700;
      font-size: 1.25rem;
      text-decoration: none;
      color: #fff;
    }

    .logo-icon {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, var(--orange), var(--orange-light));
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 0.875rem;
    }

    .nav-links {
      display: flex;
      gap: 1.5rem;
      align-items: center;
    }

    .nav-links a {
      color: var(--gray-light);
      text-decoration: none;
      font-size: 0.875rem;
      transition: color 0.2s;
    }

    .nav-links a:hover,
    .nav-links a.active {
      color: #fff;
    }

    /* Main Content */
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 7rem 1.5rem 4rem;
    }

    /* Header */
    .page-header {
      margin-bottom: 3rem;
      text-align: center;
    }

    .page-header h1 {
      font-size: 2.75rem;
      font-weight: 800;
      margin-bottom: 0.75rem;
      background: linear-gradient(135deg, #fff 0%, var(--orange) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .page-header p {
      color: var(--gray-light);
      font-size: 1.1rem;
      max-width: 500px;
      margin: 0 auto;
    }

    /* Report Card Container */
    .report-card {
      background: var(--dark-card);
      border: 1px solid var(--dark-border);
      border-radius: 20px;
      overflow: hidden;
      margin-bottom: 3rem;
    }

    /* Report Header with Image */
    .report-header {
      position: relative;
      cursor: pointer;
    }

    .report-image {
      width: 100%;
      aspect-ratio: 16/9;
      object-fit: cover;
      display: block;
      transition: opacity 0.2s;
    }

    .report-header:hover .report-image {
      opacity: 0.9;
    }

    .report-header-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 3rem 2rem 1.5rem;
      background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
    }

    .report-date-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 50px;
      font-size: 0.875rem;
      color: #fff;
      margin-bottom: 0.75rem;
    }

    .report-title-overlay {
      font-size: 1.75rem;
      font-weight: 700;
      margin: 0;
    }

    /* Signal Badge */
    .signal-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      border-radius: 12px;
      font-size: 1.25rem;
      font-weight: 700;
    }

    .signal-badge.bullish {
      background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 255, 136, 0.05));
      border: 1px solid rgba(0, 255, 136, 0.3);
      color: var(--green);
    }

    .signal-badge.bearish {
      background: linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(255, 68, 68, 0.05));
      border: 1px solid rgba(255, 68, 68, 0.3);
      color: var(--red);
    }

    .signal-badge.neutral {
      background: linear-gradient(135deg, rgba(255, 200, 0, 0.15), rgba(255, 200, 0, 0.05));
      border: 1px solid rgba(255, 200, 0, 0.3);
      color: var(--yellow);
    }

    .signal-badge .signal-icon {
      font-size: 1.5rem;
    }

    /* Report Content Grid */
    .report-content {
      padding: 2rem;
    }

    /* Top Row: Signal + Price */
    .report-top-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .signal-card, .price-card {
      background: var(--dark);
      border: 1px solid var(--dark-border);
      border-radius: 16px;
      padding: 1.5rem;
    }

    .card-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--gray);
      margin-bottom: 0.75rem;
    }

    .price-value {
      font-size: 2rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 0.25rem;
    }

    .price-context {
      font-size: 0.875rem;
      color: var(--gray-light);
    }

    /* Data Sections Grid */
    .data-sections {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .data-section {
      background: var(--dark);
      border: 1px solid var(--dark-border);
      border-radius: 16px;
      padding: 1.25rem;
    }

    .section-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--dark-border);
    }

    .section-icon {
      font-size: 1.25rem;
    }

    .section-title {
      font-size: 0.8125rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--orange);
    }

    .data-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0;
      border-bottom: 1px solid rgba(255,255,255,0.03);
    }

    .data-row:last-child {
      border-bottom: none;
    }

    .data-label {
      font-size: 0.8125rem;
      color: var(--gray-light);
    }

    .data-value {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
      font-weight: 600;
    }

    .data-value.positive {
      color: var(--green);
    }

    .data-value.negative {
      color: var(--red);
    }

    .data-value.neutral {
      color: var(--gray-light);
    }

    .data-percent {
      font-size: 0.75rem;
      padding: 0.125rem 0.5rem;
      border-radius: 4px;
      background: rgba(255,255,255,0.05);
    }

    /* Analysis Card */
    .analysis-card {
      background: linear-gradient(135deg, rgba(255, 107, 0, 0.08), rgba(255, 107, 0, 0.02));
      border: 1px solid rgba(255, 107, 0, 0.2);
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .analysis-card .section-header {
      border-bottom-color: rgba(255, 107, 0, 0.2);
    }

    .analysis-text {
      font-size: 0.9375rem;
      line-height: 1.7;
      color: var(--gray-light);
    }

    /* Levels Grid */
    .levels-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .level-card {
      background: var(--dark);
      border: 1px solid var(--dark-border);
      border-radius: 16px;
      padding: 1.25rem;
    }

    .level-card.resistance {
      border-left: 3px solid var(--red);
    }

    .level-card.support {
      border-left: 3px solid var(--green);
    }

    .level-type {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.5rem;
    }

    .level-card.resistance .level-type {
      color: var(--red);
    }

    .level-card.support .level-type {
      color: var(--green);
    }

    .level-price {
      font-size: 1.5rem;
      font-weight: 700;
      color: #fff;
    }

    /* Open Levels */
    .open-levels {
      background: var(--dark);
      border: 1px solid var(--dark-border);
      border-radius: 16px;
      padding: 1.25rem;
      margin-bottom: 1.5rem;
    }

    .open-levels-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 1rem;
    }

    .open-level-item {
      text-align: center;
      padding: 1rem;
      background: rgba(255,255,255,0.02);
      border-radius: 12px;
    }

    .open-level-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--gray);
      margin-bottom: 0.5rem;
    }

    .open-level-price {
      font-size: 1.125rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 0.375rem;
    }

    .open-level-status {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 0.25rem 0.625rem;
      border-radius: 50px;
    }

    .open-level-status.holding {
      background: rgba(0, 255, 136, 0.1);
      color: var(--green);
    }

    .open-level-status.lost {
      background: rgba(255, 68, 68, 0.1);
      color: var(--red);
    }

    .open-level-status.not-visible {
      background: rgba(255, 255, 255, 0.05);
      color: var(--gray);
    }

    /* Report Footer */
    .report-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 1.5rem;
      border-top: 1px solid var(--dark-border);
    }

    .report-tags {
      display: flex;
      gap: 0.5rem;
    }

    .tag {
      background: var(--dark);
      color: var(--gray);
      padding: 0.375rem 0.75rem;
      border-radius: 6px;
      font-size: 0.75rem;
      border: 1px solid var(--dark-border);
    }

    .telegram-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      background: linear-gradient(135deg, #0088cc, #00aaff);
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
      font-size: 0.875rem;
      font-weight: 600;
      transition: all 0.2s;
    }

    .telegram-link:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 136, 204, 0.3);
    }

    /* Disclaimer */
    .report-disclaimer {
      margin-top: 1rem;
      padding: 1rem;
      background: rgba(255,255,255,0.02);
      border-radius: 8px;
      font-size: 0.75rem;
      color: var(--gray);
      font-style: italic;
    }

    /* Lightbox */
    .lightbox {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.95);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .lightbox.active {
      display: flex;
    }

    .lightbox img {
      max-width: 100%;
      max-height: 100%;
      border-radius: 8px;
    }

    .lightbox-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255,255,255,0.1);
      border: none;
      color: #fff;
      font-size: 1.5rem;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0.7;
      transition: all 0.2s;
    }

    .lightbox-close:hover {
      opacity: 1;
      background: rgba(255,255,255,0.2);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 5rem 2rem;
      background: var(--dark-card);
      border: 1px solid var(--dark-border);
      border-radius: 20px;
    }

    .empty-state-icon {
      font-size: 4rem;
      margin-bottom: 1.5rem;
      opacity: 0.5;
    }

    .empty-state h3 {
      font-size: 1.5rem;
      margin-bottom: 0.75rem;
    }

    .empty-state p {
      color: var(--gray);
      max-width: 400px;
      margin: 0 auto;
    }

    /* Footer */
    footer {
      padding: 3rem 2rem;
      border-top: 1px solid var(--dark-border);
      text-align: center;
      margin-top: 4rem;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: var(--gray);
      text-decoration: none;
      font-size: 0.875rem;
      transition: color 0.2s;
    }

    .footer-links a:hover {
      color: #fff;
    }

    .copyright {
      color: var(--gray);
      font-size: 0.8125rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .report-top-row {
        grid-template-columns: 1fr;
      }

      .data-sections {
        grid-template-columns: 1fr;
      }

      .levels-grid {
        grid-template-columns: 1fr;
      }

      .open-levels-grid {
        grid-template-columns: 1fr;
      }

      .report-footer {
        flex-direction: column;
        gap: 1rem;
      }

      .page-header h1 {
        font-size: 2rem;
      }
    }

    @media (max-width: 640px) {
      .nav-links {
        gap: 1rem;
      }

      .report-content {
        padding: 1.25rem;
      }

      .report-title-overlay {
        font-size: 1.25rem;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav>
    <div class="nav-content">
      <a href="/" class="logo">
        <span class="logo-icon">CF</span>
        Capital Flow
      </a>
      <div class="nav-links">
        <a href="/">Home</a>
        <a href="/reports.html" class="active">Reports</a>
        <a href="/about.html">About</a>
        <a href="https://t.me/fivedaytrader" target="_blank">Telegram</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <!-- Page Header -->
    <div class="page-header">
      <h1>Daily Reports</h1>
      <p>Institutional-grade BTC analysis powered by Capital Flow indicator</p>
    </div>

    <!-- Reports Feed -->
    <div id="reports-feed">
      <div class="empty-state">
        <div class="empty-state-icon">üìä</div>
        <h3>Loading reports...</h3>
        <p>Fetching the latest Capital Flow analysis</p>
      </div>
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" onclick="closeLightbox()">
    <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
    <img id="lightbox-img" src="" alt="Full size image">
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-links">
      <a href="/">Home</a>
      <a href="/reports.html">Reports</a>
      <a href="/about.html">About</a>
      <a href="https://t.me/fivedaytrader" target="_blank">Telegram</a>
      <a href="https://mdxalgo.com/?ref=CsMGq" target="_blank">MDX ALGO</a>
      <a href="/privacy.html">Privacy</a>
      <a href="/disclaimer.html">Disclaimer</a>
    </div>
    <p class="copyright" style="max-width: 500px; margin: 0 auto 1rem; font-size: 0.7rem; color: var(--gray);">
      <strong style="color: var(--orange);">Disclosure:</strong> Capital Flow Filter is a free, independent indicator. Not affiliated with MDX ALGO. Affiliate links used.
    </p>
    <p class="copyright">
      Built by traders, for traders.
    </p>
  </footer>

  <script>
    function openLightbox(src) {
      document.getElementById('lightbox-img').src = src;
      document.getElementById('lightbox').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox() {
      document.getElementById('lightbox').classList.remove('active');
      document.body.style.overflow = '';
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeLightbox();
    });

    // Parse report text into structured data
    function parseReport(reportText) {
      const data = {
        signal: { type: 'neutral', value: '0%', label: 'NEUTRAL' },
        price: { value: 'N/A', context: '' },
        macro: [],
        crypto: [],
        sectors: [],
        analysis: '',
        resistance: 'N/A',
        support: 'N/A',
        openLevels: { daily: null, weekly: null, monthly: null }
      };

      // Extract signal
      const signalMatch = reportText.match(/SIGNAL[:\s]*(BULLISH|BEARISH|NEUTRAL|LEAN BULL|LEAN BEAR|FULL SEND)[^0-9]*(\d+%?)/i);
      if (signalMatch) {
        const signalText = signalMatch[1].toUpperCase();
        data.signal.label = signalText;
        data.signal.value = signalMatch[2].includes('%') ? signalMatch[2] : signalMatch[2] + '%';
        if (signalText.includes('BULL') || signalText === 'BULLISH') {
          data.signal.type = 'bullish';
        } else if (signalText.includes('BEAR') || signalText === 'BEARISH') {
          data.signal.type = 'bearish';
        } else {
          data.signal.type = 'neutral';
        }
      }

      // Extract price
      const priceMatch = reportText.match(/PRICE[:\s]*\$?([\d,]+)/i);
      if (priceMatch) {
        data.price.value = '$' + priceMatch[1];
      }
      const priceContextMatch = reportText.match(/PRICE[:\s]*\$?[\d,]+\s*\(([^)]+)\)/i);
      if (priceContextMatch) {
        data.price.context = priceContextMatch[1];
      }

      // Extract Macro data
      const macroSection = reportText.match(/MACRO[\s\S]*?(?=CRYPTO|‚Çø|$)/i);
      if (macroSection) {
        const dxyMatch = macroSection[0].match(/DXY[:\s]*(\d+%?)[^‚Äî\n]*(?:‚Äî|-)?\s*([^\n‚Ä¢]+)?/i);
        const vixMatch = macroSection[0].match(/VIX[:\s]*(\d+%?)[^‚Äî\n]*(?:‚Äî|-)?\s*([^\n‚Ä¢]+)?/i);
        const goldMatch = macroSection[0].match(/GOLD[:\s]*(\d+%?)[^‚Äî\n]*(?:‚Äî|-)?\s*([^\n‚Ä¢]+)?/i);
        const yieldsMatch = macroSection[0].match(/YIELDS?[:\s]*(\d+%?)[^‚Äî\n]*(?:‚Äî|-)?\s*([^\n‚Ä¢]+)?/i);

        if (dxyMatch) data.macro.push({ label: 'DXY', value: dxyMatch[1], context: dxyMatch[2]?.trim() || '' });
        if (vixMatch) data.macro.push({ label: 'VIX', value: vixMatch[1], context: vixMatch[2]?.trim() || '' });
        if (goldMatch) data.macro.push({ label: 'GOLD', value: goldMatch[1], context: goldMatch[2]?.trim() || '' });
        if (yieldsMatch) data.macro.push({ label: 'YIELDS', value: yieldsMatch[1], context: yieldsMatch[2]?.trim() || '' });
      }

      // Extract Crypto data
      const cryptoSection = reportText.match(/CRYPTO[\s\S]*?(?=SECTOR|üìà|$)/i);
      if (cryptoSection) {
        const btcMatch = cryptoSection[0].match(/BTC[^:]*[:\s]*(\d+%?)/i);
        const ethMatch = cryptoSection[0].match(/ETH[^:]*[:\s]*(\d+%?)/i);

        if (btcMatch) data.crypto.push({ label: 'BTC Flow', value: btcMatch[1] });
        if (ethMatch) data.crypto.push({ label: 'ETH Flow', value: ethMatch[1] });
      }

      // Extract Sectors data
      const sectorsSection = reportText.match(/SECTOR[\s\S]*?(?=ANALYSIS|üìù|$)/i);
      if (sectorsSection) {
        const btcdMatch = sectorsSection[0].match(/BTC\.?D[:\s]*(\d+%?)[^‚Äî\n]*(?:‚Äî|-)?\s*([^\n‚Ä¢]+)?/i);
        const total3Match = sectorsSection[0].match(/TOTAL3[:\s]*(\d+%?)[^‚Äî\n]*(?:‚Äî|-)?\s*([^\n‚Ä¢]+)?/i);

        if (btcdMatch) data.sectors.push({ label: 'BTC.D', value: btcdMatch[1], context: btcdMatch[2]?.trim() || '' });
        if (total3Match) data.sectors.push({ label: 'TOTAL3', value: total3Match[1], context: total3Match[2]?.trim() || '' });
      }

      // Extract Analysis
      const analysisMatch = reportText.match(/ANALYSIS[:\s]*\n?([^\nÔøΩ‚ö†]+(?:\n[^\nÔøΩ‚ö†]+)*)/i);
      if (analysisMatch) {
        data.analysis = analysisMatch[1].replace(/^[‚Ä¢\s]+/, '').trim();
      }

      // Extract Key Levels
      const resistanceMatch = reportText.match(/Resistance[:\s]*\$?([\d,]+)/i);
      const supportMatch = reportText.match(/Support[:\s]*\$?([\d,]+)/i);
      if (resistanceMatch) data.resistance = '$' + resistanceMatch[1];
      if (supportMatch) data.support = '$' + supportMatch[1];

      // Extract Open Levels
      const openSection = reportText.match(/OPEN LEVELS[\s\S]*?(?=Not financial|<i>|$)/i);
      if (openSection) {
        const dailyMatch = openSection[0].match(/Daily[:\s]*\$?([\d,]+)[^‚úÖ‚ùå]*([‚úÖ‚ùå])\s*(Holding|Lost)/i);
        const weeklyMatch = openSection[0].match(/Weekly[:\s]*\$?([\d,]+)[^‚úÖ‚ùå]*([‚úÖ‚ùå])\s*(Holding|Lost)/i);
        const monthlyMatch = openSection[0].match(/Monthly[:\s]*\$?([\d,]+)[^‚úÖ‚ùå]*([‚úÖ‚ùå])\s*(Holding|Lost)/i);

        if (dailyMatch) {
          data.openLevels.daily = {
            price: '$' + dailyMatch[1],
            status: dailyMatch[3].toLowerCase()
          };
        }
        if (weeklyMatch) {
          data.openLevels.weekly = {
            price: '$' + weeklyMatch[1],
            status: weeklyMatch[3].toLowerCase()
          };
        }
        if (monthlyMatch) {
          data.openLevels.monthly = {
            price: '$' + monthlyMatch[1],
            status: monthlyMatch[3].toLowerCase()
          };
        }
      }

      return data;
    }

    // Convert "Wednesday, December 10, 2025" to "Wed, Dec 10"
    function getShortDate(dateStr) {
      // Parse the date string format: "Weekday, Month Day, Year"
      const parts = dateStr.split(', ');
      if (parts.length >= 2) {
        const weekday = parts[0].slice(0, 3); // Wed
        const monthDay = parts[1].split(' '); // ["December", "10"]
        if (monthDay.length >= 2) {
          const month = monthDay[0].slice(0, 3); // Dec
          const day = monthDay[1]; // 10
          return `${weekday}, ${month} ${day}`;
        }
      }
      return dateStr; // Fallback to original
    }

    // Render a beautiful report card
    function renderReportCard(report) {
      const parsed = parseReport(report.reportText);

      const signalIcon = parsed.signal.type === 'bullish' ? 'üìà' :
                         parsed.signal.type === 'bearish' ? 'üìâ' : '‚û°Ô∏è';

      // Helper to determine data value color
      function getValueClass(value) {
        const num = parseInt(value);
        if (num >= 55) return 'positive';
        if (num <= 45) return 'negative';
        return 'neutral';
      }

      // Render macro rows
      const macroRows = parsed.macro.map(m => `
        <div class="data-row">
          <span class="data-label">${m.label}</span>
          <span class="data-value ${getValueClass(m.value)}">
            <span class="data-percent">${m.value}</span>
          </span>
        </div>
      `).join('');

      // Render crypto rows
      const cryptoRows = parsed.crypto.map(c => `
        <div class="data-row">
          <span class="data-label">${c.label}</span>
          <span class="data-value ${getValueClass(c.value)}">
            <span class="data-percent">${c.value}</span>
          </span>
        </div>
      `).join('');

      // Render sector rows
      const sectorRows = parsed.sectors.map(s => `
        <div class="data-row">
          <span class="data-label">${s.label}</span>
          <span class="data-value ${getValueClass(s.value)}">
            <span class="data-percent">${s.value}</span>
          </span>
        </div>
      `).join('');

      // Render open levels
      function renderOpenLevel(label, data) {
        if (!data) {
          return `
            <div class="open-level-item">
              <div class="open-level-label">${label}</div>
              <div class="open-level-price">‚Äî</div>
              <span class="open-level-status not-visible">Not visible</span>
            </div>
          `;
        }
        const statusClass = data.status === 'holding' ? 'holding' : 'lost';
        const statusIcon = data.status === 'holding' ? '‚úì' : '‚úó';
        const statusText = data.status === 'holding' ? 'Holding' : 'Lost';
        return `
          <div class="open-level-item">
            <div class="open-level-label">${label}</div>
            <div class="open-level-price">${data.price}</div>
            <span class="open-level-status ${statusClass}">${statusIcon} ${statusText}</span>
          </div>
        `;
      }

      return `
        <article class="report-card">
          <div class="report-header" onclick="openLightbox('${report.image}')">
            <img src="${report.image}" alt="BTC 4H Chart - ${report.date}" class="report-image">
            <div class="report-header-overlay">
              <div class="report-date-badge">
                <span>üìÖ</span>
                ${report.date}
              </div>
              <h2 class="report-title-overlay">Capital Flow Daily Analysis</h2>
            </div>
          </div>

          <div class="report-content">
            <!-- Top Row: Signal + Price -->
            <div class="report-top-row">
              <div class="signal-card">
                <div class="card-label">
                  <span>üéØ</span> ${getShortDate(report.date)}
                </div>
                <div class="signal-badge ${parsed.signal.type}">
                  <span class="signal-icon">${signalIcon}</span>
                  <span>${parsed.signal.label} ${parsed.signal.value}</span>
                </div>
              </div>
              <div class="price-card">
                <div class="card-label">
                  <span>üí∞</span> BTC Price
                </div>
                <div class="price-value">${parsed.price.value}</div>
                ${parsed.price.context ? `<div class="price-context">${parsed.price.context}</div>` : ''}
              </div>
            </div>

            <!-- Data Sections -->
            <div class="data-sections">
              <div class="data-section">
                <div class="section-header">
                  <span class="section-icon">üåç</span>
                  <span class="section-title">Macro</span>
                </div>
                ${macroRows || '<div class="data-row"><span class="data-label">No data</span></div>'}
              </div>

              <div class="data-section">
                <div class="section-header">
                  <span class="section-icon">‚Çø</span>
                  <span class="section-title">Crypto</span>
                </div>
                ${cryptoRows || '<div class="data-row"><span class="data-label">No data</span></div>'}
              </div>

              <div class="data-section">
                <div class="section-header">
                  <span class="section-icon">üìà</span>
                  <span class="section-title">Sectors</span>
                </div>
                ${sectorRows || '<div class="data-row"><span class="data-label">No data</span></div>'}
              </div>
            </div>

            <!-- Analysis -->
            ${parsed.analysis ? `
              <div class="analysis-card">
                <div class="section-header">
                  <span class="section-icon">üìù</span>
                  <span class="section-title">Analysis</span>
                </div>
                <p class="analysis-text">${parsed.analysis}</p>
              </div>
            ` : ''}

            <!-- Key Levels -->
            <div class="levels-grid">
              <div class="level-card resistance">
                <div class="level-type">‚¨ÜÔ∏è Resistance</div>
                <div class="level-price">${parsed.resistance}</div>
              </div>
              <div class="level-card support">
                <div class="level-type">‚¨áÔ∏è Support</div>
                <div class="level-price">${parsed.support}</div>
              </div>
            </div>

            <!-- Open Levels -->
            <div class="open-levels">
              <div class="section-header">
                <span class="section-icon">üìç</span>
                <span class="section-title">Open Levels</span>
              </div>
              <div class="open-levels-grid">
                ${renderOpenLevel('Daily', parsed.openLevels.daily)}
                ${renderOpenLevel('Weekly', parsed.openLevels.weekly)}
                ${renderOpenLevel('Monthly', parsed.openLevels.monthly)}
              </div>
            </div>

            <!-- Footer -->
            <div class="report-footer">
              <div class="report-tags">
                <span class="tag">#BTC</span>
                <span class="tag">#CapitalFlow</span>
                <span class="tag">#4H</span>
              </div>
              <a href="https://t.me/fivedaytrader" target="_blank" class="telegram-link">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                </svg>
                Join Telegram
              </a>
            </div>

            <div class="report-disclaimer">
              Not financial advice. Trade at your own risk. Past performance is not indicative of future results.
            </div>
          </div>
        </article>
      `;
    }

    // Load reports from JSON archive
    async function loadReports() {
      try {
        const response = await fetch('/reports-data.json');
        if (!response.ok) throw new Error('No reports');

        const reports = await response.json();
        const feed = document.getElementById('reports-feed');

        if (reports.length === 0) {
          feed.innerHTML = `
            <div class="empty-state">
              <div class="empty-state-icon">üìä</div>
              <h3>No Reports Yet</h3>
              <p>Daily Capital Flow reports will appear here. Join our Telegram for real-time updates.</p>
            </div>
          `;
          return;
        }

        feed.innerHTML = reports.map(report => renderReportCard(report)).join('');

      } catch (error) {
        console.log('Error loading reports:', error);
        document.getElementById('reports-feed').innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üìä</div>
            <h3>No Reports Available</h3>
            <p>Daily Capital Flow reports will appear here once generated.</p>
          </div>
        `;
      }
    }

    // Load reports on page load
    loadReports();
  </script>

  <!-- Suggestion Widget -->
  <script src="/js/suggest-widget.js"></script>
</body>
</html>
